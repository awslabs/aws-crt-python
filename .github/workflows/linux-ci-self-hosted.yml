name: CI Self-Hosted

on: [push]

jobs:
  Ubuntu:

    runs-on: [self-hosted, linux]

    steps:
    - name: Checkout Source
      uses: actions/checkout@v1

    - name: Install Toolchain
      run: |
        python3 -c "from urllib.request import urlretrieve; urlretrieve('https://raw.githubusercontent.com/awslabs/aws-c-common/builder2/codebuild/builder.py', 'builder.py')"
        python3 builder.py --spec=linux-clang-9-linux-x64 run install-tools
    
    - name: Build and Test
      run: |
        python3 builder.py run aws-crt-python
